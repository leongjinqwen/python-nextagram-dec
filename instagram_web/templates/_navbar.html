<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" style="min-height: auto;" href="/">
    <img src="{{ url_for('static', filename='images/next.ico') }}" width="36" alt="logo">
    Nextagram
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
    <ul class="navbar-nav">
      {% if current_user.is_authenticated %}
        <li class="nav-item">
          <a class="nav-link" href="#" data-toggle="modal" data-target="#exampleModal">Upload</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('users.show',username=current_user.username)}}">Profile</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('users.edit',id=current_user.id)}}">Edit</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('sessions.destroy')}}">Sign Out</a>
        </li>
      {% else %}
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('sessions.new')}}">Sign In</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('users.new')}}">Sign Up</a>
        </li>
      {% endif %}
    </ul>
  </div>
</nav>
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">New Images</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <img id="previewimage" width="100%" class="mb-2"/>
        <form action="{{url_for('images.create')}}" method="POST" enctype="multipart/form-data">
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
            <div class="input-group">
              <div class="custom-file">
                <input type="file" id="uploadFile" class="custom-file-input" name="image_file" id="inputGroupFile04" aria-describedby="inputGroupFileAddon04">
                <label class="custom-file-label" for="inputGroupFile04">Choose file</label>
              </div>
              <div class="input-group-append">
                <button class="btn btn-outline-success" type="submit" id="inputGroupFileAddon04">Upload</button>
              </div>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<script>
  // live preview image
  document.getElementById("uploadFile").onchange = function () {
    let reader = new FileReader();
    reader.onload = function (e) {
      document.getElementById("previewimage").src = e.target.result;
    };
    reader.readAsDataURL(this.files[0]);
  };
  $('.custom-file-input').on('change', function() { 
    let fileName = $(this).val().split('\\').pop(); 
    $(this).next('.custom-file-label').addClass("selected").html(fileName); 
  });
</script>